{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect } from 'react';\nconst useLogoutOnClose = () => {\n  _s();\n  useEffect(() => {\n    // Set a flag when the page is first loaded\n    sessionStorage.setItem('isRefreshing', 'true');\n    const handlePageHide = event => {\n      // Check if the page is being persisted (not a full close)\n      if (!event.persisted) {\n        localStorage.removeItem('user');\n      }\n    };\n    const handleVisibilityChange = () => {\n      if (document.visibilityState === 'hidden') {\n        // Only clear if we don't have the refresh flag\n        if (!sessionStorage.getItem('isRefreshing')) {\n          localStorage.removeItem('user');\n        }\n      }\n    };\n    window.addEventListener('pagehide', handlePageHide);\n    document.addEventListener('visibilitychange', handleVisibilityChange);\n    return () => {\n      // Clear the refresh flag after the initial load\n      setTimeout(() => {\n        sessionStorage.removeItem('isRefreshing');\n      }, 1000);\n      window.removeEventListener('pagehide', handlePageHide);\n      document.removeEventListener('visibilitychange', handleVisibilityChange);\n    };\n  }, []);\n};\n_s(useLogoutOnClose, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\nexport default useLogoutOnClose;","map":{"version":3,"names":["useEffect","useLogoutOnClose","_s","sessionStorage","setItem","handlePageHide","event","persisted","localStorage","removeItem","handleVisibilityChange","document","visibilityState","getItem","window","addEventListener","setTimeout","removeEventListener"],"sources":["C:/Users/Hp/Desktop/FAST/Software Engineering/Recipe Genie/Frontend/src/hooks/useLogoutOnClose.js"],"sourcesContent":["import { useEffect } from 'react';\r\n\r\nconst useLogoutOnClose = () => {\r\n  useEffect(() => {\r\n    // Set a flag when the page is first loaded\r\n    sessionStorage.setItem('isRefreshing', 'true');\r\n    \r\n    const handlePageHide = (event) => {\r\n      // Check if the page is being persisted (not a full close)\r\n      if (!event.persisted) {\r\n        localStorage.removeItem('user');\r\n      }\r\n    };\r\n\r\n    const handleVisibilityChange = () => {\r\n      if (document.visibilityState === 'hidden') {\r\n        // Only clear if we don't have the refresh flag\r\n        if (!sessionStorage.getItem('isRefreshing')) {\r\n          localStorage.removeItem('user');\r\n        }\r\n      }\r\n    };\r\n\r\n    window.addEventListener('pagehide', handlePageHide);\r\n    document.addEventListener('visibilitychange', handleVisibilityChange);\r\n\r\n    return () => {\r\n      // Clear the refresh flag after the initial load\r\n      setTimeout(() => {\r\n        sessionStorage.removeItem('isRefreshing');\r\n      }, 1000);\r\n\r\n      window.removeEventListener('pagehide', handlePageHide);\r\n      document.removeEventListener('visibilitychange', handleVisibilityChange);\r\n    };\r\n  }, []);\r\n};\r\n\r\nexport default useLogoutOnClose;"],"mappings":";AAAA,SAASA,SAAS,QAAQ,OAAO;AAEjC,MAAMC,gBAAgB,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC7BF,SAAS,CAAC,MAAM;IACd;IACAG,cAAc,CAACC,OAAO,CAAC,cAAc,EAAE,MAAM,CAAC;IAE9C,MAAMC,cAAc,GAAIC,KAAK,IAAK;MAChC;MACA,IAAI,CAACA,KAAK,CAACC,SAAS,EAAE;QACpBC,YAAY,CAACC,UAAU,CAAC,MAAM,CAAC;MACjC;IACF,CAAC;IAED,MAAMC,sBAAsB,GAAGA,CAAA,KAAM;MACnC,IAAIC,QAAQ,CAACC,eAAe,KAAK,QAAQ,EAAE;QACzC;QACA,IAAI,CAACT,cAAc,CAACU,OAAO,CAAC,cAAc,CAAC,EAAE;UAC3CL,YAAY,CAACC,UAAU,CAAC,MAAM,CAAC;QACjC;MACF;IACF,CAAC;IAEDK,MAAM,CAACC,gBAAgB,CAAC,UAAU,EAAEV,cAAc,CAAC;IACnDM,QAAQ,CAACI,gBAAgB,CAAC,kBAAkB,EAAEL,sBAAsB,CAAC;IAErE,OAAO,MAAM;MACX;MACAM,UAAU,CAAC,MAAM;QACfb,cAAc,CAACM,UAAU,CAAC,cAAc,CAAC;MAC3C,CAAC,EAAE,IAAI,CAAC;MAERK,MAAM,CAACG,mBAAmB,CAAC,UAAU,EAAEZ,cAAc,CAAC;MACtDM,QAAQ,CAACM,mBAAmB,CAAC,kBAAkB,EAAEP,sBAAsB,CAAC;IAC1E,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;AACR,CAAC;AAACR,EAAA,CAlCID,gBAAgB;AAoCtB,eAAeA,gBAAgB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}