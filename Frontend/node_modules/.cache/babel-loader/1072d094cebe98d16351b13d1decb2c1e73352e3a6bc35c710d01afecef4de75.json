{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect } from 'react';\nconst useLogoutOnClose = () => {\n  _s();\n  // In your component or App.js file\n  useEffect(() => {\n    let isTabClosing = false;\n    const handleBeforeUnload = e => {\n      if (!e) e = window.event;\n\n      // For modern browsers\n      if (e.persisted) {\n        // Page is being cached (probably not a close)\n        return;\n      }\n      isTabClosing = true;\n      localStorage.removeItem('user');\n    };\n\n    // Differentiate between refresh and close\n    window.addEventListener('beforeunload', handleBeforeUnload);\n    window.addEventListener('pagehide', handleBeforeUnload);\n\n    // Cleanup\n    return () => {\n      if (!isTabClosing) {\n        // This is a component unmount, not a tab close\n        localStorage.removeItem('user');\n      }\n      window.removeEventListener('beforeunload', handleBeforeUnload);\n      window.removeEventListener('pagehide', handleBeforeUnload);\n    };\n  }, []);\n};\n_s(useLogoutOnClose, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\nexport default useLogoutOnClose;","map":{"version":3,"names":["useEffect","useLogoutOnClose","_s","isTabClosing","handleBeforeUnload","e","window","event","persisted","localStorage","removeItem","addEventListener","removeEventListener"],"sources":["C:/Users/Hp/Desktop/FAST/Software Engineering/Recipe Genie/Frontend/src/hooks/useLogoutOnClose.js"],"sourcesContent":["import { useEffect } from 'react';\r\n\r\nconst useLogoutOnClose = () => {\r\n // In your component or App.js file\r\n    useEffect(() => {\r\n        let isTabClosing = false;\r\n      \r\n        const handleBeforeUnload = (e) => {\r\n          if (!e) e = window.event;\r\n          \r\n          // For modern browsers\r\n          if (e.persisted) {\r\n            // Page is being cached (probably not a close)\r\n            return;\r\n          }\r\n          \r\n          isTabClosing = true;\r\n          localStorage.removeItem('user');\r\n        };\r\n      \r\n        // Differentiate between refresh and close\r\n        window.addEventListener('beforeunload', handleBeforeUnload);\r\n        window.addEventListener('pagehide', handleBeforeUnload);\r\n      \r\n        // Cleanup\r\n        return () => {\r\n          if (!isTabClosing) {\r\n            // This is a component unmount, not a tab close\r\n            localStorage.removeItem('user');\r\n          }\r\n          window.removeEventListener('beforeunload', handleBeforeUnload);\r\n          window.removeEventListener('pagehide', handleBeforeUnload);\r\n        };\r\n      }, []);\r\n  \r\n};\r\n\r\nexport default useLogoutOnClose;\r\n"],"mappings":";AAAA,SAASA,SAAS,QAAQ,OAAO;AAEjC,MAAMC,gBAAgB,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC9B;EACGF,SAAS,CAAC,MAAM;IACZ,IAAIG,YAAY,GAAG,KAAK;IAExB,MAAMC,kBAAkB,GAAIC,CAAC,IAAK;MAChC,IAAI,CAACA,CAAC,EAAEA,CAAC,GAAGC,MAAM,CAACC,KAAK;;MAExB;MACA,IAAIF,CAAC,CAACG,SAAS,EAAE;QACf;QACA;MACF;MAEAL,YAAY,GAAG,IAAI;MACnBM,YAAY,CAACC,UAAU,CAAC,MAAM,CAAC;IACjC,CAAC;;IAED;IACAJ,MAAM,CAACK,gBAAgB,CAAC,cAAc,EAAEP,kBAAkB,CAAC;IAC3DE,MAAM,CAACK,gBAAgB,CAAC,UAAU,EAAEP,kBAAkB,CAAC;;IAEvD;IACA,OAAO,MAAM;MACX,IAAI,CAACD,YAAY,EAAE;QACjB;QACAM,YAAY,CAACC,UAAU,CAAC,MAAM,CAAC;MACjC;MACAJ,MAAM,CAACM,mBAAmB,CAAC,cAAc,EAAER,kBAAkB,CAAC;MAC9DE,MAAM,CAACM,mBAAmB,CAAC,UAAU,EAAER,kBAAkB,CAAC;IAC5D,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;AAEZ,CAAC;AAACF,EAAA,CAjCID,gBAAgB;AAmCtB,eAAeA,gBAAgB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}